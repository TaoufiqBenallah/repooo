const ipRangeCheck = require('ip-range-check');

let ipRange;

/* Source of information: https://help.salesforce.com/s/articleView?id=sf.mc_es_ip_addresses_for_inclusion.htm&type=5 */
switch (process.env.STACK) {
  case '1':
    ipRange = [
      '13.111.250.1/32',
      '13.111.250.2/31',
      '13.111.250.4/30',
      '13.111.250.8/30',
      '13.111.250.12/31',
      '13.111.250.14/32',
      '206.246.157.1/32',
      '206.246.157.2/31',
      '206.246.157.4/30',
      '206.246.157.8/29',
      '206.246.157.16/28',
      '206.246.157.32/27',
      '206.246.157.64/26',
      '206.246.157.128/26',
      '206.246.157.192/27',
      '206.246.157.224/28',
      '206.246.157.240/29',
      '206.246.157.248/30',
      '206.246.157.252/31',
      '206.246.157.254/32',
      '68.232.203.1/32',
      '68.232.203.2/31',
      '68.232.203.4/30',
      '68.232.203.8/29',
      '68.232.203.16/28',
      '68.232.203.32/27',
      '68.232.203.64/26',
      '68.232.203.128/26',
      '68.232.203.192/27',
      '68.232.203.224/28',
      '68.232.203.240/29',
      '68.232.203.248/30',
      '68.232.203.252/31',
      '68.232.203.254/32',
    ];
    break;
  case '4':
    ipRange = [
      '66.231.94.1/32',
      '66.231.94.2/31',
      '66.231.94.4/30',
      '66.231.94.8/29',
      '66.231.94.16/28',
      '66.231.94.32/27',
      '66.231.94.64/26',
      '66.231.94.128/26',
      '66.231.94.192/27',
      '66.231.94.224/28',
      '66.231.94.240/29',
      '66.231.94.248/30',
      '66.231.94.252/31',
      '66.231.94.254/32',
    ];
    break;
  case '6':
    ipRange = [
      '68.232.203.1/32',
      '68.232.203.2/31',
      '68.232.203.4/30',
      '68.232.203.8/29',
      '68.232.203.16/28',
      '68.232.203.32/27',
      '68.232.203.64/26',
      '68.232.203.128/26',
      '68.232.203.192/27',
      '68.232.203.224/28',
      '68.232.203.240/29',
      '68.232.203.248/30',
      '68.232.203.252/31',
      '68.232.203.254/32',
    ];
    break;
  case '7':
    ipRange = [
      '136.147.128.1/32',
      '136.147.128.2/31',
      '136.147.128.4/30',
      '136.147.128.8/29',
      '136.147.128.16/28',
      '136.147.128.32/27',
      '136.147.128.64/26',
      '136.147.128.128/26',
      '136.147.128.192/27',
      '136.147.128.224/28',
      '136.147.128.240/29',
      '136.147.128.248/30',
      '136.147.128.252/31',
      '136.147.128.254/32',
    ];
    break;
  case '10':
    ipRange = [
      '13.111.17.1/32',
      '13.111.17.2/31',
      '13.111.17.4/30',
      '13.111.17.8/29',
      '13.111.17.16/28',
      '13.111.17.32/27',
      '13.111.17.64/26',
      '13.111.17.128/26',
      '13.111.17.192/27',
      '13.111.17.224/28',
      '13.111.17.240/29',
      '13.111.17.248/30',
      '13.111.17.252/31',
      '13.111.17.254/32',
    ];
    break;
  case '11':
    ipRange = [
      '13.111.66.0/25',
      '13.111.66.128/26',
      '13.111.66.192/27',
      '13.111.66.224/28',
      '13.111.66.240/29',
      '13.111.66.248/30',
      '13.111.66.252/31',
      '13.111.66.254/32',
    ];
    break;
  case '12':
    ipRange = ['13.110.208.5/32', '13.110.208.6/31', '13.110.208.8/29'];
    break;
  case '50':
    ipRange = [
      '161.71.32.1/32',
      '161.71.32.2/31',
      '161.71.32.4/30',
      '161.71.32.8/29',
      '161.71.32.16/28',
      '161.71.32.32/27',
      '161.71.32.64/26',
      '161.71.32.128/26',
      '161.71.32.192/27',
      '161.71.32.224/28',
      '161.71.32.240/29',
      '161.71.32.248/30',
      '161.71.32.252/31',
      '161.71.32.254/32',
    ];
    break;
  default:
    ipRange = [];
}

module.exports = (ip) => ipRangeCheck(ip, ipRange);
